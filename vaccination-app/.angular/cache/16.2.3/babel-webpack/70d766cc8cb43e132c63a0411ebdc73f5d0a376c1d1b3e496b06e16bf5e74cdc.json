{"ast":null,"code":"var _class;\nimport { faMagnifyingGlass } from '@fortawesome/free-solid-svg-icons';\nimport { DatePipe } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../vaccination.service\";\nimport * as i3 from \"../user.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@fortawesome/angular-fontawesome\";\nimport * as i7 from \"@angular/material/datepicker\";\nimport * as i8 from \"@angular/material/input\";\nimport * as i9 from \"@angular/material/form-field\";\nfunction PlanningComponent_div_0_tr_24_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function PlanningComponent_div_0_tr_24_button_4_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const aPatient_r3 = i0.ɵɵnextContext().$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.updatePatient(aPatient_r3));\n    });\n    i0.ɵɵtext(1, \" Valider \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PlanningComponent_div_0_tr_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 15)(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, PlanningComponent_div_0_tr_24_button_4_Template, 2, 0, \"button\", 16);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const aPatient_r3 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", aPatient_r3.fname, \" \", aPatient_r3.lname, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !aPatient_r3.vaccinated);\n  }\n}\nfunction PlanningComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"br\");\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 3)(8, \"input\", 4);\n    i0.ɵɵlistener(\"ngModelChange\", function PlanningComponent_div_0_Template_input_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.patient_lname = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function PlanningComponent_div_0_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.getPatients());\n    });\n    i0.ɵɵelement(10, \"fa-icon\", 6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 7)(12, \"label\", 8);\n    i0.ɵɵtext(13, \" Date de r\\u00E9servation \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 9)(15, \"input\", 10);\n    i0.ɵɵlistener(\"ngModelChange\", function PlanningComponent_div_0_Template_input_ngModelChange_15_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.selectedDate = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"mat-datepicker-toggle\", 11)(17, \"mat-datepicker\", null, 12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"table\")(20, \"tr\", 13)(21, \"td\");\n    i0.ɵɵtext(22);\n    i0.ɵɵpipe(23, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(24, PlanningComponent_div_0_tr_24_Template, 5, 3, \"tr\", 14);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const _r1 = i0.ɵɵreference(18);\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.center.name, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate3(\" \", ctx_r0.center.address, \" \", ctx_r0.center.postal, \", \", ctx_r0.center.city, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.patient_lname);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"icon\", ctx_r0.searchIcon);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"matDatepicker\", _r1)(\"ngModel\", ctx_r0.selectedDate);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", _r1);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" R\\u00E9servations du \", i0.ɵɵpipeBind2(23, 11, ctx_r0.selectedDate, \"dd/MM/yyyy\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.patients);\n  }\n}\nexport class PlanningComponent {\n  constructor(route, vaccinationService, userService, datePipe) {\n    this.route = route;\n    this.vaccinationService = vaccinationService;\n    this.userService = userService;\n    this.datePipe = datePipe;\n    this.selectedDate = new Date();\n    this.searchIcon = faMagnifyingGlass;\n  }\n  ngOnInit() {\n    const id = Number(this.route.snapshot.paramMap.get(\"id\"));\n    this.userService.getUserById(id).subscribe(resultUser => {\n      this.user = resultUser;\n      if (this.user.role == 'admin') {\n        this.vaccinationService.getAdminCenter(this.user.id).subscribe(resultCenter => {\n          this.center = resultCenter;\n        });\n      }\n      if (this.user.role == 'doctor') {\n        this.vaccinationService.getDoctorCenter(this.user.id).subscribe(resultCenter => {\n          this.center = resultCenter;\n        });\n      }\n    });\n  }\n  getPatients() {\n    if (this.center) {\n      this.vaccinationService.getBookingByCenter(this.center?.id, this.patient_lname).subscribe(resultPatients => {\n        this.patients = resultPatients;\n        const formattedDate = this.datePipe.transform(this.selectedDate, \"dd/MM/yyyy\");\n        this.patients = resultPatients.filter(patient => this.isBookingOnDate(patient, formattedDate));\n      });\n    }\n  }\n  isBookingOnDate(booking, selectedDate) {\n    return booking.registration_date === selectedDate;\n  }\n  updatePatient(aPatient) {\n    this.vaccinationService.updatePatient(aPatient.id, aPatient).subscribe();\n  }\n}\n_class = PlanningComponent;\n_class.ɵfac = function PlanningComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.VaccinationService), i0.ɵɵdirectiveInject(i3.UserService), i0.ɵɵdirectiveInject(i4.DatePipe));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-planning\"]],\n  features: [i0.ɵɵProvidersFeature([DatePipe])],\n  decls: 1,\n  vars: 1,\n  consts: [[\"class\", \"component\", 4, \"ngIf\"], [1, \"component\"], [1, \"details\"], [1, \"searchpatients\"], [\"placeholder\", \"Nom de famille du patient\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\"], [3, \"icon\"], [1, \"labelinput\"], [\"for\", \"date\"], [1, \"inputdate\"], [\"matInput\", \"\", 3, \"matDatepicker\", \"ngModel\", \"ngModelChange\"], [\"matSuffix\", \"\", 1, \"button\", 3, \"for\"], [\"picker\", \"\"], [1, \"date\"], [4, \"ngFor\", \"ngForOf\"], [1, \"patient\"], [3, \"click\", 4, \"ngIf\"]],\n  template: function PlanningComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, PlanningComponent_div_0_Template, 25, 14, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.center);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel, i6.FaIconComponent, i7.MatDatepicker, i7.MatDatepickerInput, i7.MatDatepickerToggle, i8.MatInput, i9.MatSuffix, i4.DatePipe],\n  styles: [\".component[_ngcontent-%COMP%] {\\n  width: 450px;\\n  display: flex;\\n  flex-direction: column;\\n  margin-left: 50px;\\n  margin-right: 50px;\\n  margin-top: 20px;\\n}\\n\\nspan[_ngcontent-%COMP%] {\\n  font-size: min(4vh, 2vw, 15px);\\n}\\n\\n.searchpatients[_ngcontent-%COMP%] {\\n  height: 30px;\\n  margin-top: 10px;\\n  border: 1px solid #369;\\n  border-radius: 2px;\\n  display: flex;\\n  justify-content: space-between;\\n}\\n\\n.searchpatients[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  background: none;\\n  border: none;\\n  height: 100%;\\n  font-size: min(4vh, 2vw, 15px);\\n  color: #369;\\n  cursor: pointer;\\n}\\n\\n.searchpatients[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\\n  color: rgb(40, 136, 214);\\n}\\n\\n.searchpatients[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  height: -moz-fit-content;\\n  height: fit-content;\\n  border: none;\\n  height: 90%;\\n  width: 100%;\\n  font-size: min(4vh, 2vw, 15px);\\n}\\n\\n.searchpatients[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder {\\n  padding-left: 5px;\\n}\\n\\ntable[_ngcontent-%COMP%] {\\n  border-collapse: collapse;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  margin-top: 10px;\\n  width: 100%;\\n  font-size: min(4vh, 2vw, 15px);\\n  max-height: 120px;\\n  overflow-y: auto;\\n  border: 1px solid #369;\\n  border-radius: 3px;\\n}\\n\\ntr[_ngcontent-%COMP%] {\\n  width: 100%;\\n  display: flex;\\n  justify-content: center;\\n}\\n\\ntd[_ngcontent-%COMP%] {\\n  padding-top: 5px;\\n  padding-bottom: 5px;\\n}\\n\\n.patient[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding-left: 5px;\\n  padding-right: 5px;\\n  display: flex;\\n  justify-content: space-between;\\n  border-top: solid #369 1px;\\n}\\n\\n.date[_ngcontent-%COMP%] {\\n  background-color: rgba(224, 224, 224, 0.395);\\n}\\n\\n.inputdate[_ngcontent-%COMP%] {\\n  width: 50%;\\n  height: 30px;\\n  display: flex;\\n  align-items: center;\\n  padding-right: 2px;\\n}\\n\\n.inputdate[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  height: -moz-fit-content;\\n  height: fit-content;\\n  border: none;\\n  width: 130px;\\n  height: 90%;\\n  font-size: min(4vh, 2vw, 15px);\\n}\\n\\n.labelinput[_ngcontent-%COMP%] {\\n  margin-top: 10px;\\n  font-size: min(4vh, 2vw, 15px);\\n  border: 1px solid #369;\\n  border-radius: 3px;\\n  padding-left: 5px;\\n  padding-top: 5px;\\n  padding-bottom: 5px;\\n  width: -moz-fit-content;\\n  width: fit-content;\\n}\\n\\nbutton[_ngcontent-%COMP%] {\\n  font-size: min(4vh, 2vw, 13px);\\n  border: solid #369 1px;\\n  border-radius: 3px;\\n  background-color: #369;\\n  color: white;\\n  cursor: pointer;\\n}\\n\\nbutton[_ngcontent-%COMP%]:hover {\\n  background-color: rgb(40, 136, 214);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGxhbm5pbmcvcGxhbm5pbmcuY29tcG9uZW50LnNjc3MiLCJ3ZWJwYWNrOi8vLi8uLi8uLi8uLi9EZXYlMjBGdWxsU3RhY2svVmFjY2luYXRpb25Db3ZpZEFwcC92YWNjaW5hdGlvbi1hcHAvc3JjL2FwcC9wbGFubmluZy9wbGFubmluZy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFlBQUE7RUFDQSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7QUNDSjs7QURFQTtFQUNJLDhCQUFBO0FDQ0o7O0FERUE7RUFDSSxZQUFBO0VBQ0EsZ0JBQUE7RUFDQSxzQkFBQTtFQUNBLGtCQUFBO0VBQ0EsYUFBQTtFQUNBLDhCQUFBO0FDQ0o7O0FERUE7RUFDSSxnQkFBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0VBQ0EsOEJBQUE7RUFDQSxXQUFBO0VBQ0EsZUFBQTtBQ0NKOztBREVBO0VBQ0ksd0JBQUE7QUNDSjs7QURFQTtFQUNJLHdCQUFBO0VBQUEsbUJBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtFQUNBLFdBQUE7RUFDQSw4QkFBQTtBQ0NKOztBREVBO0VBQ0ksaUJBQUE7QUNDSjs7QURFQTtFQUNJLHlCQUFBO0VBQ0EsYUFBQTtFQUNBLHNCQUFBO0VBQ0EsbUJBQUE7RUFDQSxnQkFBQTtFQUNBLFdBQUE7RUFDQSw4QkFBQTtFQUNBLGlCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxzQkFBQTtFQUNBLGtCQUFBO0FDQ0o7O0FERUE7RUFDSSxXQUFBO0VBQ0EsYUFBQTtFQUNBLHVCQUFBO0FDQ0o7O0FERUE7RUFDSSxnQkFBQTtFQUNBLG1CQUFBO0FDQ0o7O0FERUE7RUFDSSxXQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtFQUNBLGFBQUE7RUFDQSw4QkFBQTtFQUNBLDBCQUFBO0FDQ0o7O0FERUE7RUFDSSw0Q0FBQTtBQ0NKOztBREVBO0VBQ0ksVUFBQTtFQUNBLFlBQUE7RUFDQSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSxrQkFBQTtBQ0NKOztBREVBO0VBQ0ksd0JBQUE7RUFBQSxtQkFBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtFQUNBLDhCQUFBO0FDQ0o7O0FERUE7RUFDSSxnQkFBQTtFQUNBLDhCQUFBO0VBQ0Esc0JBQUE7RUFDQSxrQkFBQTtFQUNBLGlCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0VBQUEsa0JBQUE7QUNDSjs7QURFQTtFQUNJLDhCQUFBO0VBQ0Esc0JBQUE7RUFDQSxrQkFBQTtFQUNBLHNCQUFBO0VBQ0EsWUFBQTtFQUNBLGVBQUE7QUNDSjs7QURFQTtFQUNJLG1DQUFBO0FDQ0oiLCJzb3VyY2VzQ29udGVudCI6WyIuY29tcG9uZW50e1xuICAgIHdpZHRoOiA0NTBweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgbWFyZ2luLWxlZnQ6IDUwcHg7XG4gICAgbWFyZ2luLXJpZ2h0OiA1MHB4O1xuICAgIG1hcmdpbi10b3A6IDIwcHg7XG59XG5cbnNwYW57XG4gICAgZm9udC1zaXplOiBtaW4oNHZoLCAydncsIDE1cHgpO1xufVxuXG4uc2VhcmNocGF0aWVudHN7XG4gICAgaGVpZ2h0OiAzMHB4O1xuICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgIzM2OTtcbiAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG59XG5cbi5zZWFyY2hwYXRpZW50cyBidXR0b257XG4gICAgYmFja2dyb3VuZDogbm9uZTtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGZvbnQtc2l6ZTogbWluKDR2aCwgMnZ3LCAxNXB4KTtcbiAgICBjb2xvcjogIzM2OTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5zZWFyY2hwYXRpZW50cyBidXR0b246aG92ZXJ7XG4gICAgY29sb3I6IHJnYig0MCwgMTM2LCAyMTQpO1xufVxuXG4uc2VhcmNocGF0aWVudHMgaW5wdXR7XG4gICAgaGVpZ2h0OiBmaXQtY29udGVudDtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgaGVpZ2h0OiA5MCU7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgZm9udC1zaXplOiBtaW4oNHZoLCAydncsIDE1cHgpO1xufVxuXG4uc2VhcmNocGF0aWVudHMgaW5wdXQ6OnBsYWNlaG9sZGVye1xuICAgIHBhZGRpbmctbGVmdDogNXB4O1xufVxuXG50YWJsZXtcbiAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgZm9udC1zaXplOiBtaW4oNHZoLCAydncsIDE1cHgpO1xuICAgIG1heC1oZWlnaHQ6IDEyMHB4O1xuICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgYm9yZGVyOiAxcHggc29saWQgIzM2OTtcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XG59XG5cbnRye1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbnRke1xuICAgIHBhZGRpbmctdG9wOiA1cHg7XG4gICAgcGFkZGluZy1ib3R0b206IDVweDtcbn1cblxuLnBhdGllbnQge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIHBhZGRpbmctbGVmdDogNXB4O1xuICAgIHBhZGRpbmctcmlnaHQ6IDVweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICBib3JkZXItdG9wOnNvbGlkICMzNjkgMXB4O1xufVxuXG4uZGF0ZXtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDIyNCwgMjI0LCAyMjQsIDAuMzk1KTtcbn1cblxuLmlucHV0ZGF0ZXtcbiAgICB3aWR0aDogNTAlO1xuICAgIGhlaWdodDogMzBweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgcGFkZGluZy1yaWdodDogMnB4XG59XG5cbi5pbnB1dGRhdGUgaW5wdXR7XG4gICAgaGVpZ2h0OiBmaXQtY29udGVudDtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgd2lkdGg6IDEzMHB4O1xuICAgIGhlaWdodDogOTAlO1xuICAgIGZvbnQtc2l6ZTogbWluKDR2aCwgMnZ3LCAxNXB4KTtcbn1cblxuLmxhYmVsaW5wdXR7XG4gICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICBmb250LXNpemU6IG1pbig0dmgsIDJ2dywgMTVweCk7XG4gICAgYm9yZGVyOiAxcHggc29saWQgIzM2OTtcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgcGFkZGluZy1sZWZ0OiA1cHg7XG4gICAgcGFkZGluZy10b3A6IDVweDtcbiAgICBwYWRkaW5nLWJvdHRvbTogNXB4O1xuICAgIHdpZHRoOiBmaXQtY29udGVudDtcbn1cblxuYnV0dG9ue1xuICAgIGZvbnQtc2l6ZTogbWluKDR2aCwgMnZ3LCAxM3B4KTtcbiAgICBib3JkZXI6IHNvbGlkICMzNjkgMXB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiMzNjk7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuYnV0dG9uOmhvdmVye1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYig0MCwgMTM2LCAyMTQpO1xufVxuXG5cbiIsIi5jb21wb25lbnQge1xuICB3aWR0aDogNDUwcHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIG1hcmdpbi1sZWZ0OiA1MHB4O1xuICBtYXJnaW4tcmlnaHQ6IDUwcHg7XG4gIG1hcmdpbi10b3A6IDIwcHg7XG59XG5cbnNwYW4ge1xuICBmb250LXNpemU6IG1pbig0dmgsIDJ2dywgMTVweCk7XG59XG5cbi5zZWFyY2hwYXRpZW50cyB7XG4gIGhlaWdodDogMzBweDtcbiAgbWFyZ2luLXRvcDogMTBweDtcbiAgYm9yZGVyOiAxcHggc29saWQgIzM2OTtcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG59XG5cbi5zZWFyY2hwYXRpZW50cyBidXR0b24ge1xuICBiYWNrZ3JvdW5kOiBub25lO1xuICBib3JkZXI6IG5vbmU7XG4gIGhlaWdodDogMTAwJTtcbiAgZm9udC1zaXplOiBtaW4oNHZoLCAydncsIDE1cHgpO1xuICBjb2xvcjogIzM2OTtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4uc2VhcmNocGF0aWVudHMgYnV0dG9uOmhvdmVyIHtcbiAgY29sb3I6IHJnYig0MCwgMTM2LCAyMTQpO1xufVxuXG4uc2VhcmNocGF0aWVudHMgaW5wdXQge1xuICBoZWlnaHQ6IGZpdC1jb250ZW50O1xuICBib3JkZXI6IG5vbmU7XG4gIGhlaWdodDogOTAlO1xuICB3aWR0aDogMTAwJTtcbiAgZm9udC1zaXplOiBtaW4oNHZoLCAydncsIDE1cHgpO1xufVxuXG4uc2VhcmNocGF0aWVudHMgaW5wdXQ6OnBsYWNlaG9sZGVyIHtcbiAgcGFkZGluZy1sZWZ0OiA1cHg7XG59XG5cbnRhYmxlIHtcbiAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgbWFyZ2luLXRvcDogMTBweDtcbiAgd2lkdGg6IDEwMCU7XG4gIGZvbnQtc2l6ZTogbWluKDR2aCwgMnZ3LCAxNXB4KTtcbiAgbWF4LWhlaWdodDogMTIwcHg7XG4gIG92ZXJmbG93LXk6IGF1dG87XG4gIGJvcmRlcjogMXB4IHNvbGlkICMzNjk7XG4gIGJvcmRlci1yYWRpdXM6IDNweDtcbn1cblxudHIge1xuICB3aWR0aDogMTAwJTtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbnRkIHtcbiAgcGFkZGluZy10b3A6IDVweDtcbiAgcGFkZGluZy1ib3R0b206IDVweDtcbn1cblxuLnBhdGllbnQge1xuICB3aWR0aDogMTAwJTtcbiAgcGFkZGluZy1sZWZ0OiA1cHg7XG4gIHBhZGRpbmctcmlnaHQ6IDVweDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBib3JkZXItdG9wOiBzb2xpZCAjMzY5IDFweDtcbn1cblxuLmRhdGUge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDIyNCwgMjI0LCAyMjQsIDAuMzk1KTtcbn1cblxuLmlucHV0ZGF0ZSB7XG4gIHdpZHRoOiA1MCU7XG4gIGhlaWdodDogMzBweDtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZy1yaWdodDogMnB4O1xufVxuXG4uaW5wdXRkYXRlIGlucHV0IHtcbiAgaGVpZ2h0OiBmaXQtY29udGVudDtcbiAgYm9yZGVyOiBub25lO1xuICB3aWR0aDogMTMwcHg7XG4gIGhlaWdodDogOTAlO1xuICBmb250LXNpemU6IG1pbig0dmgsIDJ2dywgMTVweCk7XG59XG5cbi5sYWJlbGlucHV0IHtcbiAgbWFyZ2luLXRvcDogMTBweDtcbiAgZm9udC1zaXplOiBtaW4oNHZoLCAydncsIDE1cHgpO1xuICBib3JkZXI6IDFweCBzb2xpZCAjMzY5O1xuICBib3JkZXItcmFkaXVzOiAzcHg7XG4gIHBhZGRpbmctbGVmdDogNXB4O1xuICBwYWRkaW5nLXRvcDogNXB4O1xuICBwYWRkaW5nLWJvdHRvbTogNXB4O1xuICB3aWR0aDogZml0LWNvbnRlbnQ7XG59XG5cbmJ1dHRvbiB7XG4gIGZvbnQtc2l6ZTogbWluKDR2aCwgMnZ3LCAxM3B4KTtcbiAgYm9yZGVyOiBzb2xpZCAjMzY5IDFweDtcbiAgYm9yZGVyLXJhZGl1czogM3B4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzY5O1xuICBjb2xvcjogd2hpdGU7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuYnV0dG9uOmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDQwLCAxMzYsIDIxNCk7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["faMagnifyingGlass","DatePipe","i0","ɵɵelementStart","ɵɵlistener","PlanningComponent_div_0_tr_24_button_4_Template_button_click_0_listener","ɵɵrestoreView","_r7","aPatient_r3","ɵɵnextContext","$implicit","ctx_r5","ɵɵresetView","updatePatient","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","PlanningComponent_div_0_tr_24_button_4_Template","ɵɵadvance","ɵɵtextInterpolate2","fname","lname","ɵɵproperty","vaccinated","ɵɵelement","PlanningComponent_div_0_Template_input_ngModelChange_8_listener","$event","_r9","ctx_r8","patient_lname","PlanningComponent_div_0_Template_button_click_9_listener","ctx_r10","getPatients","PlanningComponent_div_0_Template_input_ngModelChange_15_listener","ctx_r11","selectedDate","PlanningComponent_div_0_tr_24_Template","ɵɵtextInterpolate1","ctx_r0","center","name","ɵɵtextInterpolate3","address","postal","city","searchIcon","_r1","ɵɵpipeBind2","patients","PlanningComponent","constructor","route","vaccinationService","userService","datePipe","Date","ngOnInit","id","Number","snapshot","paramMap","get","getUserById","subscribe","resultUser","user","role","getAdminCenter","resultCenter","getDoctorCenter","getBookingByCenter","resultPatients","formattedDate","transform","filter","patient","isBookingOnDate","booking","registration_date","aPatient","ɵɵdirectiveInject","i1","ActivatedRoute","i2","VaccinationService","i3","UserService","i4","selectors","features","ɵɵProvidersFeature","decls","vars","consts","template","PlanningComponent_Template","rf","ctx","PlanningComponent_div_0_Template"],"sources":["/Users/thibault_m/Desktop/Polytech/5A/Dev FullStack/VaccinationCovidApp/vaccination-app/src/app/planning/planning.component.ts","/Users/thibault_m/Desktop/Polytech/5A/Dev FullStack/VaccinationCovidApp/vaccination-app/src/app/planning/planning.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { VaccinationCenter } from '../vaccination-center-list/vaccination-center';\nimport { ActivatedRoute } from '@angular/router';\nimport { VaccinationService } from '../vaccination.service';\nimport { UserService } from '../user.service';\nimport { User } from '../authentification/user';\nimport { faMagnifyingGlass } from '@fortawesome/free-solid-svg-icons';\nimport { Booking } from '../vaccination-center/booking';\nimport { DatePipe } from '@angular/common';\n\n@Component({\n  selector: 'app-planning',\n  templateUrl: './planning.component.html',\n  styleUrls: ['./planning.component.scss'],\n  providers: [DatePipe]\n})\nexport class PlanningComponent implements OnInit{\n  \n  center?: VaccinationCenter;\n  user?: User;\n  patients?: Booking[];\n  patient_lname?: string;\n  selectedDate: Date = new Date();\n  searchIcon = faMagnifyingGlass;\n\n  constructor(private route: ActivatedRoute, private vaccinationService: VaccinationService, private userService: UserService, private datePipe: DatePipe){}\n\n  ngOnInit(): void{\n    const id = Number(this.route.snapshot.paramMap.get(\"id\"));\n    this.userService.getUserById(id).subscribe(resultUser=>{\n      this.user = resultUser;\n\n      if(this.user.role == 'admin'){\n        this.vaccinationService.getAdminCenter(this.user.id).subscribe(resultCenter=>{\n          this.center = resultCenter;\n        })\n      }\n  \n      if(this.user.role == 'doctor'){\n        this.vaccinationService.getDoctorCenter(this.user.id).subscribe(resultCenter=>{\n          this.center = resultCenter;\n        })\n      }\n    })\n\n  }\n\n  getPatients(){\n    if(this.center){\n      this.vaccinationService.getBookingByCenter(this.center?.id, this.patient_lname).subscribe(resultPatients=>{\n        this.patients = resultPatients;\n        const formattedDate = this.datePipe.transform(this.selectedDate, \"dd/MM/yyyy\")!;\n        this.patients = resultPatients.filter(patient => this.isBookingOnDate(patient, formattedDate));\n      })\n    }\n  }\n\n  isBookingOnDate(booking: Booking, selectedDate: string): boolean {\n    return booking.registration_date === selectedDate;\n  }\n\n  updatePatient(aPatient: Booking){\n    this.vaccinationService.updatePatient(aPatient.id, aPatient).subscribe();\n  }\n\n\n}\n","<div class=\"component\" *ngIf=\"center\">\n    <div class=\"details\">\n        <span> {{center.name}}</span><br/>\n        <span> {{center.address}} {{center.postal}}, {{center.city}} </span>\n    </div>\n    <div class=\"searchpatients\">\n        <input [(ngModel)]=\"patient_lname\" placeholder=\"Nom de famille du patient\"/>\n        <button (click)=\"getPatients()\"><fa-icon [icon]=\"searchIcon\"> </fa-icon></button>\n    </div>\n\n    <div class=\"labelinput\">\n        <label for=\"date\"> Date de réservation </label>\n        <div class=\"inputdate\">\n            <input matInput [matDatepicker]=\"picker\" [(ngModel)]=\"selectedDate\">\n            <mat-datepicker-toggle matSuffix [for]=\"picker\" class=\"button\"></mat-datepicker-toggle>\n            <mat-datepicker #picker></mat-datepicker>\n        </div>\n    </div>\n\n    <table>\n        <tr class=\"date\"> \n            <td> Réservations du {{ selectedDate | date:'dd/MM/yyyy' }} </td>\n        </tr>\n        <tr *ngFor=\"let aPatient of patients\"> \n            <td class=\"patient\"> <span>{{aPatient.fname}} {{aPatient.lname}}</span> <button *ngIf=\"!aPatient.vaccinated\" (click)=\"updatePatient(aPatient)\"> Valider </button> </td> \n        </tr>\n    </table>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}